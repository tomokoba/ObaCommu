<div class="topic">
  <div class="container">
    <h1 class="topic-font my-4">投稿編集ページ</h1>
  </div>
</div>

<% if @post.errors.any? %>
  <div class="notification is-danger">
    <h2><%= pluralize(@post.errors.count, "つのエラー") %>保存に失敗しました。</h2>
    <ul>
      <% @post.errors.full_messages.each do |message| %>
      <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="main">
  <div class="card devise-card">
    <div class="form-wrap">

　　<%= form_with model: @post, url: post_path(@post), method: :patch, local:true do |f| %>
      <div class="form-group mb-4">
        <%= f.label "タイトル", class: "font-weight-bold" %><br />
        <%= f.text_field :title, class: "form-control" %>
      </div>

      <div class="form-group mb-4">
        <%= f.label "説明文", class: "font-weight-bold" %><br />
        <%= f.text_field :caption, class: "form-control" %>
      </div>

      <div class="form-group mb-4">
        <%= f.label "画像", class: "font-weight-bold" %>（必須）複数選択可</br>
        <%= f.attachment_field :photos_images, multiple: true %>
      </div>

      <div class="actions">
        <%= f.submit "編集を完了する", class: "btn btn-primary btn-shadow w-100" %>
      </div>
    <% end %>

    <div class="mt-3">
    <% if @post.user_id == current_user.id %>
      <%= link_to post_path(@post), method: :delete, "data-confirm" => "OKを押すと投稿が削除されます。本当によろしいですか？" do %>
        <div class="fas fa-trash-alt no-underline-danger"> 投稿を削除する</div>
      <% end %>
    <% end %>
    </div>
    </div>
  </div>
</div>